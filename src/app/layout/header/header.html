<nav class="custom-header position-fixed fixed-top bg-black">
   <div class="container-fluid px-0">
      <div class="row align-items-center header-row gx-3">
         <div class="col-auto ms-4">
            <div class="brand" routerLink="/">
               JOMOKERS TICKET
            </div>
         </div>

         <div class="col center-nav">
            <nav class="main-nav">
               <ul class="nav-list">
                  <li><a routerLink="/" class="nav-link rounded"><span class="nav-text">Home</span></a></li>
                  <li><a routerLink="/about" class="nav-link rounded"><span class="nav-text">About</span></a></li>
                  
                  <!-- Unauthenticated User Navigation -->
                  @if (!isAuthenticated) {
                     <li><a class="nav-link rounded" (click)="goToLogin()" style="cursor: pointer;">
                        <span class="nav-text">Login</span>
                     </a></li>
                     <li><a class="nav-link rounded" (click)="goToSignUp()" style="cursor: pointer;">
                        <span class="nav-text">Sign Up</span>
                     </a></li>
                  }
               </ul>
            </nav>
         </div>

         <div class="col-auto">
            <div class="search-form" role="search">
               <input class="search-input" type="search" [(ngModel)]="query" (input)="onSearchInput()"
                  placeholder="Search events..." aria-label="Search events" autocomplete="off" />
               <button class="search-btn" type="button" (click)="onSearchInput()">
                  üîç
               </button>
               @if (query.trim().length && suggestions.length) {
               <ul class="search-suggestions">
                  @for (s of suggestions; track s.id) {
                  <li (click)="selectSuggestion(s)" tabindex="0">
                     {{ s.title }}
                  </li>
                  }
               </ul>
               }
            </div>
         </div>

         <div class="col-auto me-4">
            <!-- Authenticated User Navigation - Profile on Right -->
            @if (isAuthenticated && currentUser) {
               <div class="user-nav">
                  <span class="user-name">üë§ {{ currentUser.fullName }}</span>
                  @if (currentUser.role === 'user') {
                     <a routerLink="/my-bookings" class="nav-link rounded">
                        <span class="nav-text">üìã My Bookings</span>
                     </a>
                  } @else {
                     <a class="nav-link rounded" (click)="goToDashboard()" style="cursor: pointer;">
                        <span class="nav-text">
                           @if (currentUser.role === 'eo') { üìä Dashboard }
                           @if (currentUser.role === 'admin') { ‚öôÔ∏è Admin }
                        </span>
                     </a>
                  }
                  <a class="nav-link rounded logout-btn" (click)="logout()" style="cursor: pointer;">
                     <span class="nav-text">Logout</span>
                  </a>
               </div>
            }
         </div>
      </div>
   </div>
</nav>